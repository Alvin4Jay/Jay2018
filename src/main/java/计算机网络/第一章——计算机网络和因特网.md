## 第一章——计算机网络和因特网

###  一、因特网的概念

```html
因特网是一个世界范围的计算机网络，是一个互联了遍及全世界的数以亿计的计算机的网络。所有的计算设备称为 主机或端系统 。端系统通过 通信链路和分组交换机(路由器、链路层交换机) 连接在一起。通信链路的传输速度以比特/秒度(bit/s，或bps)；链路层交换机通常用于 接入网 中，而路由器通常用于 网络核心 中。此外，端系统通过 因特网服务提供商(ISP) 接入因特网，包括如本地电缆或住宅区这样的住宅区ISP、公司ISP、大学ISP，以及公共场所WiFi接入的ISP等。
```

### 二、	网络边缘

#### 1.接入网

	指将端系统连接到其边缘路由器的物理链路。

- 家庭接入：`DSL`、电缆、`FTTH`、拨号和卫星
- 企业：以太网和`WiFi`
- 广域无线接入：`3G`和`LTE`

#### 2.物理媒体

	如双绞铜线、同轴电缆、光纤等。

### 三、网络核心

####  1.分组交换(`package switch`)

	在网络应用中，端系统彼此交换报文(message)。为了从源端系统向目的端系统发送一个报文，源将长报文划分为较小的数据块，成为 分组 。在源和目的地之间，每个分组通过通信链路和分组交换机传送。

(1) **存储转发传输**

	存储转发机制：在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接受到 整个分组。 
	
	发送一个分组的端到端时延：d=N\*L/R(N为链路数目，R为速率，L是分组大小) 

(2) **排队时延和丢包**

	每个分组交换机有多条链路相连，对于每条相连的链路，交换机具有 输出缓存(队列) 。除了存储转发时延，分组还要承受输出缓存的 排队时延 。当一个到达的分组发现该缓存已经被其他分组充满时，就会出现 分组丢包 。 

(3) **转发表和路由选择协议**

	在因特网中，每台端系统具有一个 IP 地址。当源主机向目的主机端系统发送一个分组时，源在该分组的首部包含了目的地的IP地址。当一个分组到达网络中的路由器时，路由器检查该分组的目的地址的一部分，并向一台相邻路由器转发该分组。每台路由器具有一个 转发表 ，用于将目的地址(或目的地址的一部分)映射成输出链路。因特网中具有一些特殊的 路由选择协议 ，用于自动设置转发表。

#### 2.电路交换

	在电路交换网络中，端系统通信会话期间，预留了端系统通信沿电路所需要的资源(缓存，链路传输速率) 。在分组交换网络中，这些资源是不被预留的，会话报文按需使用这些资源，可能不得不等待(排队)接入通信线路。传统的电话网络是电路交换。

(1) 电路交换网络中的复用

	链路中的电路通过频分复用FDM、时分复用TDM实现。对于FDM，链路的频谱由跨越链路创建的所有连接共享，在连接期间为每条连接专用一个频段。对于TDM，时间被划分为固定区间的帧，并且每帧被划分为固定数量的时隙。当网络跨越一条链路创建一条连接时，网络在每个帧中为该链接指定一个时隙。这些时隙专门由该链接单独使用，一个时隙(在每个帧内)用于传输该链接的数据。

(2) 分组交换与电路交换的对比

```
- 分组交换不适合实时服务，因为端到端时延是不可预测的。
- 分组交换提供了比电路交换更好的带宽共享  
- 分组交换比电路交换更简单，更有效，实现成本更低
```

#### 3.网络的网络

![](http://pbku1z6p0.bkt.clouddn.com/network-1.png)

### 四、分组交换网中旳时延、丢包和吞吐量

#### 1.时延概述

	结点总时延包括结点处理时延、排队时延、传输时延、传播时延。(P25)

![](http://pbku1z6p0.bkt.clouddn.com/network-2.png)

- 处理时延：检查分组首部和决定将该分组导向何处所需要的时间
- 排队时延：在队列中，当分组在链路上等待传输时，经过排队时延。
- 传输时延：路由器将所有分组的比特推向(传输)向链路所需要的时间。(若**`L`比特**表示该分组的长度，**`R bps`**表示从路由器`A`到路由器`B`的链路传输速度，则**传输时延是`L/R`**)
- 传播时延：从路由器`A`传播到路由器`B`所需要的时间。

#### 2.排队时延和丢包

>  `La/R`称为**流量强度**(所有分组由`L`比特组成，`a`表示分组到达队列的平均速率(分组/秒`pkt/s`)，`R`是传输速率(`bps`)) 

设计系统时流量强度不能大于1.当流量强度接近1时，到达的分组将发现一个满的队列，路由器将丢弃该分组，该分组**丢失**。

#### 3.端到端时延

```端到端时延=(路由器和源主机的处理时延+路由器到源主机的传输时延(L/R)+每条链路传播时延)*N ```

![](http://pbku1z6p0.bkt.clouddn.com/network-3.png)

#### 4.吞吐量

	任何时候的瞬时吞吐量是主机B接收到该文件的速度(以bps计，由主机A发送)。若文件由F比特组成，主机B接受到所有F比特用去T秒，则文件传输的 平均吞吐量 是 F/T 。
	
	吞吐量取决于数据流过的链路的传输速率。包括沿着路径的速率、干扰流量等。(P33)

### 五、协议层次和服务模型

#### 1.协议分层

	网络设计者以 分层 的方式组织协议以及实现这些协议的网络硬件和软件。各层所有协议被称为 协议栈 。
	
	因特网五层协议栈：应用层(报文message)、运输层(报文段segment)、网络层(数据报datagram)、数据链路层(帧frame)、物理层。

#### 2.`OSI`七层模型

	应用层、表示层、会话层、运输层、网络层、数据链路层、物理层。

#### 3.封装

	在发送主机端，一个 应用层报文 被发送到运输层。运输层收取到报文并附上附加信息(运输层首部信息)，该首部将被接收端的运输层使用。应用层报文和运输层首部信息(差错检测信息等)一起构成了 运输层报文段 。运输层报文段因此封装了应用程报文。运输层则向网络层传递该报文段，网络层增加了网络层首部信息(源和目的端系统地址等)，产生了 网络层数据报 。该数据报接下来传递给链路层，链路层增加了自己的链路层首部信息并创建了 链路层帧 。所以，在一层，一个分组有两种类型字段: 首部字段 和 有效载荷字段 (通常来自上一个分组)。



### 参考书籍：

- [计算机网络: 自顶向下方法(第六版)](https://book.douban.com/subject/26176870/)

